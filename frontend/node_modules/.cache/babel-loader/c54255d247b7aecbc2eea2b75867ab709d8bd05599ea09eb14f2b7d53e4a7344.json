{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Mateus\\\\Desktop\\\\Programas\\\\Desafio\\\\frontend\\\\src\\\\components\\\\Guarda\\\\GuardaList.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport api from '../../services/api';\nimport Swal from 'sweetalert2';\nimport withReactContent from 'sweetalert2-react-content';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MySwal = withReactContent(Swal);\n_c = MySwal;\nconst GuardaList = () => {\n  _s();\n  const [guardas, setGuardas] = useState([]);\n  const [message, setMessage] = useState('');\n  const fetchGuardas = async () => {\n    try {\n      const response = await api.get('/guardas');\n      setGuardas(response.data);\n    } catch (error) {\n      console.error(\"Erro ao buscar guardas:\", error);\n    }\n  };\n  useEffect(() => {\n    fetchGuardas();\n  }, []);\n  const handleDelete = async id => {\n    try {\n      await api.delete(`/guardas/${id}`);\n      setMessage('Guarda removido com sucesso.');\n      fetchGuardas();\n    } catch (error) {\n      setMessage('Erro ao remover guarda.');\n      console.error(\"Erro:\", error);\n    }\n  };\n  const handleUpdate = async (id, currentData) => {\n    // Atualiza os campos básicos via prompt\n    const novoNome = window.prompt(\"Digite o novo nome completo:\", currentData.nome_completo);\n    if (!novoNome || novoNome.trim() === '') return;\n    const novaMatricula = window.prompt(\"Digite a nova matrícula:\", currentData.matricula);\n    if (!novaMatricula || novaMatricula.trim() === '') return;\n    const novaNumeracaoPorte = window.prompt(\"Digite a nova numeração do porte:\", currentData.numeracao_porte);\n    if (!novaNumeracaoPorte || novaNumeracaoPorte.trim() === '') return;\n\n    // Busca as equipes para construir as opções do modal\n    let equipesOptions = {};\n    try {\n      const equipesRes = await api.get('/equipes');\n      const equipes = equipesRes.data;\n      equipes.forEach(equipe => {\n        equipesOptions[equipe.id] = equipe.nome;\n      });\n    } catch (error) {\n      console.error(\"Erro ao buscar equipes:\", error);\n      setMessage('Erro ao buscar equipes para atualização.');\n      return;\n    }\n\n    // Exibe modal customizado com dropdown para selecionar a equipe\n    const result = await MySwal.fire({\n      title: 'Selecione a nova equipe para o guarda',\n      input: 'select',\n      inputOptions: equipesOptions,\n      inputPlaceholder: 'Selecione uma equipe',\n      showCancelButton: true,\n      confirmButtonText: 'Confirmar',\n      cancelButtonText: 'Cancelar'\n    });\n    if (!result.isConfirmed || !result.value) {\n      setMessage('Atualização cancelada.');\n      return;\n    }\n    const novaEquipeId = result.value;\n    try {\n      await api.put(`/guardas/${id}`, {\n        guarda: {\n          nome_completo: novoNome,\n          matricula: novaMatricula,\n          numeracao_porte: novaNumeracaoPorte,\n          equipe_id: novaEquipeId\n        }\n      });\n      setMessage('Guarda atualizado com sucesso.');\n      fetchGuardas();\n    } catch (error) {\n      setMessage('Erro ao atualizar guarda.');\n      console.error(\"Erro:\", error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Lista de Guardas\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: guardas.map(guarda => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [guarda.nome_completo, \" - Matr\\xEDcula: \", guarda.matricula, \" - Porte: \", guarda.numeracao_porte, \" - Equipe: \", guarda.equipe ? guarda.equipe.nome : \"N/A\", /*#__PURE__*/_jsxDEV(\"button\", {\n          style: {\n            marginLeft: '10px'\n          },\n          onClick: () => handleUpdate(guarda.id, guarda),\n          children: \"Atualizar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          style: {\n            marginLeft: '10px'\n          },\n          onClick: () => handleDelete(guarda.id),\n          children: \"Deletar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 13\n        }, this)]\n      }, guarda.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 5\n  }, this);\n};\n_s(GuardaList, \"ff+U/PA2Z0Qpj2QJZktmCLAmIeI=\");\n_c2 = GuardaList;\nexport default GuardaList;\nvar _c, _c2;\n$RefreshReg$(_c, \"MySwal\");\n$RefreshReg$(_c2, \"GuardaList\");","map":{"version":3,"names":["React","useEffect","useState","api","Swal","withReactContent","jsxDEV","_jsxDEV","MySwal","_c","GuardaList","_s","guardas","setGuardas","message","setMessage","fetchGuardas","response","get","data","error","console","handleDelete","id","delete","handleUpdate","currentData","novoNome","window","prompt","nome_completo","trim","novaMatricula","matricula","novaNumeracaoPorte","numeracao_porte","equipesOptions","equipesRes","equipes","forEach","equipe","nome","result","fire","title","input","inputOptions","inputPlaceholder","showCancelButton","confirmButtonText","cancelButtonText","isConfirmed","value","novaEquipeId","put","guarda","equipe_id","children","fileName","_jsxFileName","lineNumber","columnNumber","map","style","marginLeft","onClick","_c2","$RefreshReg$"],"sources":["C:/Users/Mateus/Desktop/Programas/Desafio/frontend/src/components/Guarda/GuardaList.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport api from '../../services/api';\r\nimport Swal from 'sweetalert2';\r\nimport withReactContent from 'sweetalert2-react-content';\r\n\r\nconst MySwal = withReactContent(Swal);\r\n\r\nconst GuardaList = () => {\r\n  const [guardas, setGuardas] = useState([]);\r\n  const [message, setMessage] = useState('');\r\n\r\n  const fetchGuardas = async () => {\r\n    try {\r\n      const response = await api.get('/guardas');\r\n      setGuardas(response.data);\r\n    } catch (error) {\r\n      console.error(\"Erro ao buscar guardas:\", error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchGuardas();\r\n  }, []);\r\n\r\n  const handleDelete = async (id) => {\r\n    try {\r\n      await api.delete(`/guardas/${id}`);\r\n      setMessage('Guarda removido com sucesso.');\r\n      fetchGuardas();\r\n    } catch (error) {\r\n      setMessage('Erro ao remover guarda.');\r\n      console.error(\"Erro:\", error);\r\n    }\r\n  };\r\n\r\n  const handleUpdate = async (id, currentData) => {\r\n    // Atualiza os campos básicos via prompt\r\n    const novoNome = window.prompt(\"Digite o novo nome completo:\", currentData.nome_completo);\r\n    if (!novoNome || novoNome.trim() === '') return;\r\n\r\n    const novaMatricula = window.prompt(\"Digite a nova matrícula:\", currentData.matricula);\r\n    if (!novaMatricula || novaMatricula.trim() === '') return;\r\n\r\n    const novaNumeracaoPorte = window.prompt(\"Digite a nova numeração do porte:\", currentData.numeracao_porte);\r\n    if (!novaNumeracaoPorte || novaNumeracaoPorte.trim() === '') return;\r\n\r\n    // Busca as equipes para construir as opções do modal\r\n    let equipesOptions = {};\r\n    try {\r\n      const equipesRes = await api.get('/equipes');\r\n      const equipes = equipesRes.data;\r\n      equipes.forEach(equipe => {\r\n        equipesOptions[equipe.id] = equipe.nome;\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Erro ao buscar equipes:\", error);\r\n      setMessage('Erro ao buscar equipes para atualização.');\r\n      return;\r\n    }\r\n\r\n    // Exibe modal customizado com dropdown para selecionar a equipe\r\n    const result = await MySwal.fire({\r\n      title: 'Selecione a nova equipe para o guarda',\r\n      input: 'select',\r\n      inputOptions: equipesOptions,\r\n      inputPlaceholder: 'Selecione uma equipe',\r\n      showCancelButton: true,\r\n      confirmButtonText: 'Confirmar',\r\n      cancelButtonText: 'Cancelar'\r\n    });\r\n\r\n    if (!result.isConfirmed || !result.value) {\r\n      setMessage('Atualização cancelada.');\r\n      return;\r\n    }\r\n\r\n    const novaEquipeId = result.value;\r\n\r\n    try {\r\n      await api.put(`/guardas/${id}`, { \r\n        guarda: { \r\n          nome_completo: novoNome, \r\n          matricula: novaMatricula, \r\n          numeracao_porte: novaNumeracaoPorte, \r\n          equipe_id: novaEquipeId \r\n        } \r\n      });\r\n      setMessage('Guarda atualizado com sucesso.');\r\n      fetchGuardas();\r\n    } catch (error) {\r\n      setMessage('Erro ao atualizar guarda.');\r\n      console.error(\"Erro:\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Lista de Guardas</h2>\r\n      {message && <p>{message}</p>}\r\n      <ul>\r\n        {guardas.map(guarda => (\r\n          <li key={guarda.id}>\r\n            {guarda.nome_completo} - Matrícula: {guarda.matricula} - Porte: {guarda.numeracao_porte} - Equipe: {guarda.equipe ? guarda.equipe.nome : \"N/A\"}\r\n            <button \r\n              style={{ marginLeft: '10px' }}\r\n              onClick={() => handleUpdate(guarda.id, guarda)}\r\n            >\r\n              Atualizar\r\n            </button>\r\n            <button \r\n              style={{ marginLeft: '10px' }}\r\n              onClick={() => handleDelete(guarda.id)}\r\n            >\r\n              Deletar\r\n            </button>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GuardaList;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}